
<%= javascript_include_tag 'http://code.jquery.com/jquery-1.10.1.min.js' %>
<%= javascript_include_tag("chessboard-0.3.0.min") %>
<%= javascript_include_tag("chess.min") %>

<%= stylesheet_link_tag 'chessboard' %>

<body>
<div class="row">
  <div class="col-sm-7 col-md-6">
    <span class="h3" id="time1">0:05:00</span>
    <div id="board" style="width: 400px"></div>
    <span class="h3" id="time2">0:05:00</span>
    <hr>
    <div id="engineStatus">...</div>
  </div>
  <div class="col-sm-5 col-md-6">
    <h3>Play Computer</h3>
    <div id="pgn"></div>
    <hr>
    <form class="form-horizontal">
      <div class="form-group">
        <label for="timeBase" class="control-label col-xs-4 col-sm-6 col-md-4">Time (min)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="timeBase" value="5"></input>
        </div>
      </div>
      <div class="form-group">
        <label for="timeInc" class="control-label col-xs-4 col-sm-6 col-md-4">Increment (sec)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="timeInc" value="0"></input>
        </div>
      </div>
      <div class="form-group">
        <label for="skillLevel" class="control-label col-xs-4 col-sm-6 col-md-4">Engine Skill Level (0-20)</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="number" class="form-control" id="skillLevel" value="10"></input>
        </div>
      </div>
      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4">Choose</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <div class="btn-group" data-toggle="buttons">
            <label class="btn btn-primary active" id="color-white"><input type="radio" name="color">White</label>
            <label class="btn btn-primary" id="color-black"><input type="radio" name="color">Black</label>
          </div>
        </div>
      </div>
      <div class="form-group">
        <label for="showScore" class="control-label col-xs-4 col-sm-6 col-md-4">Show Engine Score</label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <input type="checkbox" class="form-control" id="showScore" checked></input>
        </div>
      </div>
      <div class="form-group">
        <label for="color" class="control-label col-xs-4 col-sm-6 col-md-4"></label>
        <div class="col-xs-4 col-sm-6 col-md-4">
          <button type="button" class="btn btn-primary" onclick="newGame()">New Game</button>
        </div>
      </div>
    </form>
    <h5>Reading the Score</h5>
    <small>The engine analyzes the current position to determine which side is winning. Scores with a '+' indicate an advantage for white, '-' for black.</small>
  </div>
</div>
<%= javascript_include_tag 'stockfish.js' %>
<%= javascript_include_tag 'stockfish_config' %>
<script>
  var game = engineGame({book: 'assets/book.bin'});
  function newGame() {
    var baseTime = parseFloat($('#timeBase').val()) * 60;
    var inc = parseFloat($('#timeInc').val());
    var skill = parseInt($('#skillLevel').val());
    game.reset();
    game.setTime(baseTime, inc);
    game.setSkillLevel(skill);
    game.setPlayerColor($('#color-white').hasClass('active') ? 'white' : 'black');
    game.setDisplayScore($('#showScore').is(':checked'));
    game.start();
  }
  newGame();
</script>
</body>
</html>
